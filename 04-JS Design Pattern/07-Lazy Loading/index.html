<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lazy Loading with Intersection Observer - Enhanced Example</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      h1 {
        text-align: center;
        color: white;
        margin-bottom: 30px;
        font-size: 2.5rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .stats-panel {
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
      }

      .stat-card {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .stat-number {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 0.9rem;
        opacity: 0.9;
      }

      .controls {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 20px;
      }

      button {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: all 0.3s ease;
        min-width: 120px;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .btn-primary {
        background: linear-gradient(45deg, #007bff, #0056b3);
        color: white;
      }
      .btn-success {
        background: linear-gradient(45deg, #28a745, #1e7e34);
        color: white;
      }
      .btn-warning {
        background: linear-gradient(45deg, #ffc107, #e0a800);
        color: #212529;
      }
      .btn-danger {
        background: linear-gradient(45deg, #dc3545, #c82333);
        color: white;
      }

      .section {
        background: rgba(255, 255, 255, 0.95);
        margin: 30px 0;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
      }

      .section h2 {
        color: #333;
        margin-bottom: 20px;
        font-size: 1.8rem;
        border-bottom: 3px solid #667eea;
        padding-bottom: 10px;
      }

      /* Image Gallery Styles */
      .image-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }

      .image-card {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
      }

      .image-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      .image-placeholder {
        width: 100%;
        height: 200px;
        background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
        font-size: 1.1rem;
        position: relative;
        overflow: hidden;
      }

      .image-placeholder::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmer 1.5s infinite;
      }

      @keyframes shimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .lazy-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .lazy-image.loaded {
        opacity: 1;
      }

      .image-info {
        padding: 15px;
      }

      .image-title {
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
      }

      .image-description {
        color: #666;
        font-size: 0.9rem;
      }

      .loading-indicator {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: translate(-50%, -50%) rotate(0deg);
        }
        100% {
          transform: translate(-50%, -50%) rotate(360deg);
        }
      }

      /* Content Sections */
      .content-section {
        margin: 40px 0;
        padding: 30px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
      }

      .content-section.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .content-section h3 {
        color: #667eea;
        margin-bottom: 15px;
        font-size: 1.5rem;
      }

      .content-section p {
        color: #555;
        line-height: 1.8;
        margin-bottom: 15px;
      }

      /* Video Lazy Loading */
      .video-container {
        position: relative;
        width: 100%;
        height: 300px;
        background: #000;
        border-radius: 12px;
        overflow: hidden;
        margin: 20px 0;
      }

      .video-placeholder {
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, #333, #555);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .video-placeholder:hover {
        background: linear-gradient(45deg, #555, #777);
      }

      .lazy-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* Progress Bar */
      .progress-container {
        background: #e9ecef;
        border-radius: 10px;
        overflow: hidden;
        margin: 20px 0;
      }

      .progress-bar {
        height: 8px;
        background: linear-gradient(90deg, #667eea, #764ba2);
        width: 0%;
        transition: width 0.3s ease;
      }

      /* Activity Log */
      .activity-log {
        background: #1a1a1a;
        color: #00ff41;
        padding: 20px;
        border-radius: 12px;
        font-family: "Courier New", monospace;
        font-size: 14px;
        max-height: 300px;
        overflow-y: auto;
        margin: 20px 0;
        border: 2px solid #333;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .container {
          padding: 10px;
        }

        h1 {
          font-size: 2rem;
        }

        .stats-grid {
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }

        .image-gallery {
          grid-template-columns: 1fr;
        }

        .controls {
          flex-direction: column;
          align-items: center;
        }
      }

      /* Intersection Animation */
      .fade-in {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
      }

      .fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .slide-in-left {
        opacity: 0;
        transform: translateX(-50px);
        transition: all 0.6s ease;
      }

      .slide-in-left.visible {
        opacity: 1;
        transform: translateX(0);
      }

      .slide-in-right {
        opacity: 0;
        transform: translateX(50px);
        transition: all 0.6s ease;
      }

      .slide-in-right.visible {
        opacity: 1;
        transform: translateX(0);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üöÄ Lazy Loading with Intersection Observer</h1>

      <!-- Stats Panel -->
      <div class="stats-panel">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number" id="totalImages">0</div>
            <div class="stat-label">Total Images</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="loadedImages">0</div>
            <div class="stat-label">Loaded Images</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="visibleElements">0</div>
            <div class="stat-label">Visible Elements</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="dataTransfer">0 KB</div>
            <div class="stat-label">Data Transferred</div>
          </div>
        </div>

        <div class="progress-container">
          <div class="progress-bar" id="loadingProgress"></div>
        </div>

        <div class="controls">
          <button class="btn-primary" id="addImages">Add More Images</button>
          <button class="btn-success" id="loadAll">Load All Images</button>
          <button class="btn-warning" id="resetDemo">Reset Demo</button>
          <button class="btn-danger" id="clearLog">Clear Log</button>
        </div>
      </div>

      <!-- Image Gallery Section -->
      <div class="section">
        <h2>üì∏ Lazy Loaded Image Gallery</h2>
        <p>
          Scroll down to see images load automatically as they come into view.
          This saves bandwidth and improves initial page load time.
        </p>
        <div class="image-gallery" id="imageGallery">
          <!-- Images will be dynamically added here -->
        </div>
      </div>

      <!-- Content Sections with Animations -->
      <div class="content-section fade-in" data-lazy>
        <h3>üéØ What is Lazy Loading?</h3>
        <p>
          Lazy loading is a design pattern that defers the loading of
          non-critical resources until they are needed. This technique
          significantly improves initial page load performance by only loading
          content that is currently visible to the user.
        </p>
        <p>
          The Intersection Observer API provides an efficient way to observe
          changes in the intersection of a target element with an ancestor
          element or with the viewport.
        </p>
      </div>

      <div class="content-section slide-in-left" data-lazy>
        <h3>‚ö° Performance Benefits</h3>
        <p>Lazy loading provides several key performance benefits:</p>
        <ul style="margin-left: 20px; color: #555">
          <li>Reduced initial page load time</li>
          <li>Lower bandwidth usage</li>
          <li>Improved user experience</li>
          <li>Better Core Web Vitals scores</li>
          <li>Reduced server load</li>
        </ul>
      </div>

      <div class="content-section slide-in-right" data-lazy>
        <h3>üõ†Ô∏è Implementation Techniques</h3>
        <p>Modern lazy loading can be implemented using various techniques:</p>
        <ul style="margin-left: 20px; color: #555">
          <li>Intersection Observer API (recommended)</li>
          <li>Scroll event listeners (legacy)</li>
          <li>Native lazy loading (loading="lazy")</li>
          <li>Third-party libraries</li>
        </ul>
      </div>

      <!-- Video Lazy Loading -->
      <div class="section">
        <h2>üé• Lazy Loaded Video Content</h2>
        <p>Videos are heavy resources. Click to load and play:</p>
        <div
          class="video-container"
          data-video-src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4"
        >
          <div class="video-placeholder">
            <div>
              ‚ñ∂Ô∏è Click to Load Video<br />
              <small>(Saves bandwidth until needed)</small>
            </div>
          </div>
        </div>
      </div>

      <!-- More Content Sections -->
      <div class="content-section fade-in" data-lazy>
        <h3>üìä Intersection Observer Options</h3>
        <p>
          The Intersection Observer API accepts several configuration options:
        </p>
        <ul style="margin-left: 20px; color: #555">
          <li><strong>root:</strong> The element used as the viewport</li>
          <li><strong>rootMargin:</strong> Margin around the root</li>
          <li>
            <strong>threshold:</strong> Percentage of visibility to trigger
          </li>
        </ul>
      </div>

      <div class="content-section slide-in-left" data-lazy>
        <h3>üé® Animation on Scroll</h3>
        <p>
          Intersection Observer isn't just for lazy loading - it's perfect for
          scroll-triggered animations too! Notice how these content sections
          animate as they come into view.
        </p>
      </div>

      <div class="content-section slide-in-right" data-lazy>
        <h3>üåê Browser Support</h3>
        <p>
          Intersection Observer has excellent browser support and includes
          polyfills for older browsers. It's supported in all modern browsers
          including Chrome, Firefox, Safari, and Edge.
        </p>
      </div>

      <!-- Activity Log -->
      <div class="section">
        <h2>üìù Activity Log</h2>
        <div class="activity-log" id="activityLog">
          [SYSTEM] Lazy loading demo initialized...\n
        </div>
      </div>

      <!-- Footer Content -->
      <div class="content-section fade-in" data-lazy>
        <h3>üöÄ Ready to Implement?</h3>
        <p>
          This demo shows various lazy loading techniques using the Intersection
          Observer API. The pattern is essential for modern web performance
          optimization.
        </p>
      </div>
    </div>

    <script src="./main.js"></script>
  </body>
</html>
